@{
    ViewBag.Title = "Home";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@if (ViewBag.Mensaje != null)
{
    <div class="alert alert-success alert-dismissable">
        <button type="button" class="close" data-dismiss="alert">
            &times;</button>
        @ViewBag.Mensaje
    </div>
}
@if (ViewBag.Error != null)
{
    <div class="alert alert-danger alert-dismissable">
        <button type="button" class="close" data-dismiss="alert">
            &times;</button>
        @ViewBag.Error
    </div>
}
<div>
    @if (ViewBag.PublicacionesMasRecientes.listadoDePublicaciones.Count > 0)
    {<div class="listado-publicaciones" id="ultimas-publicaciones">
        <h2>
            Ultimas publicaciones</h2>
        <br />
        <div class="row">
            @foreach (var item in ViewBag.PublicacionesMasRecientes.listadoDePublicaciones)
            {
                
                <div class="col-xs-3">
                    <a href="/publicacion/ver/@item.publicacion.Id" >
                        <div class="thumbnail">
                            <img src="../../Imagenes/Publicacion/@item.imagen.Nombre"
                                 width="110%" alt="" height= "200px" />
                            <div class="caption text-center">
                                <h4>
                                    <a href="#">
                                        @item.publicacion.Usuario.Nombre @item.publicacion.Usuario.Apellido</a></h4>
                                <strong>@item.publicacion.Rubro.Nombre</strong> <span class="badge">@item.puntaje.Total</span>
                                <br />
                                <span><a href="#">@item.publicacion.Titulo</a></span>
                                <br />
                                <h6 class="text-danger">
                                    @if (@item.publicacion.PrecioOpcion == 1)
                                    {
                                        @Html.Label("Precio:")
                                        @Html.Label("A Convenir") 
                                    }
                                    else
                                    {
                                        @Html.Label("Precio: $") 
                                        @String.Format("{0:0.00}", @item.publicacion.Precio)                     
                   
                                    }
                                </h6>
                            </div>
                        </div>
                    </a>
                </div>
            }
        </div>
        <center>
            <button type="button" class="btn btn-primary">
                Ver mas publicaciones</button>
        </center>
    </div>
    }
    else
    {
        <div class="text-center">
            <span class="text-muted">Hoy no hay publicaciones recientes.</span>
        </div>
    }
    <hr />
    @if (ViewBag.PublicacionesMejorCalificadas.listadoDePublicaciones.Count > 0)
    {
        <div id="prestadores-mejores">
            <h2>
                Prestadores mejor calificados</h2>
            <br />
            <div class="row">
                @foreach (var item in ViewBag.PublicacionesMejorCalificadas.listadoDePublicaciones)
                {
                
                    <div class="col-xs-3">
                        @*  <a href="/publicacion/ver/@item.publicacion.Id" >*@
                        <div class="thumbnail" style="height: 330px">
                            <img  src="@Url.Action("MostrarFotoPerfil", "Publicacion", new { id = @item.publicacion.IdUsuario })" alt=""  width="100%" height= "200px"/>
                            <div class="caption text-center">
                                <h4>
                                    <a href="#">
                                        @item.publicacion.Usuario.Nombre @item.publicacion.Usuario.Apellido</a></h4>
                                <strong>@item.publicacion.Rubro.Nombre</strong> <span class="badge">@item.puntaje.Total</span>
                                <br />
                            </div>
                        </div>
                        @*</a>*@
                    </div>
                }</div>
            <center>
                <button type="button" class="btn btn-primary">
                    Ver mas prestadores</button>
            </center>
        </div>
    }
    else
    {
        <div class="text-center">
            <span class="text-muted">Hoy no hay publicaciones destacadas.</span>
        </div>
    }
    <hr />
    @if (ViewBag.PublicacionesMasCercanas.listadoDePublicaciones.Count > 0)
    {
        <div id="prestadores-zona">
            <h2>
                Prestadores de mi zona</h2>
            <br />
            <div class="row">
                @foreach (var item in ViewBag.PublicacionesMasCercanas.listadoDePublicaciones)
                {
                
                    <div class="col-xs-3">
                        @*  <a href="/publicacion/ver/@item.publicacion.Id">*@
                        <div class="thumbnail" style="height: 300px">
                            <img class="" src="@Url.Action("MostrarFotoPerfil", "Publicacion", new { id = @item.publicacion.IdUsuario })" alt="plomero" width="100%"/>
                            <div class="caption text-center">
                                <h4>
                                    <a href="#">
                                        @item.publicacion.Usuario.Nombre @item.publicacion.Usuario.Apellido</a></h4>
                                <strong>@item.publicacion.Rubro.Nombre</strong> <span class="badge">@item.puntaje.Total</span>
                                <br />
                            </div>
                        </div>
                        @*  </a>*@
                    </div>
                }
            </div>
            <center>
                <button type="button" class="btn btn-primary">
                    Ver mas prestadores en mi zona</button>
            </center>
        </div>
    }
    else
    {
        <div class="text-center">
            <span class="text-muted">Hoy no hay publicaciones de tu zona.</span>
        </div>
    }
</div>
